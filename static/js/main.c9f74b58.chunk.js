(this.webpackJsonptemplate_react=this.webpackJsonptemplate_react||[]).push([[0],{16:function(t,n,e){},17:function(t,n,e){},20:function(t,n,e){"use strict";e.r(n);var a=e(6),r=e.n(a),s=e(8),c=e.n(s),o=(e(16),e(17),e(5)),i=e(0),u=e.n(i),d=e(4),p=e(1),l=e(2),j=e(11),f=e(10),h=e(9),b=function(){function t(){Object(p.a)(this,t)}return Object(l.a)(t,null,[{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"getDistance",value:function(n,e){var a=Object(o.a)(n,2),r=a[0],s=a[1],c=Object(o.a)(e,2),i=c[0],u=c[1],d=[t.toRadians(i-r),t.toRadians(u-s)],p=d[0],l=d[1],j=[t.toRadians(r),t.toRadians(i)],f=j[0],h=j[1],b=Math.sin(p/2)*Math.sin(p/2)+Math.sin(l/2)*Math.sin(l/2)*Math.cos(f)*Math.cos(h);return 6371*(2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b)))}}]),t}(),v=function(){function t(){Object(p.a)(this,t)}return Object(l.a)(t,null,[{key:"getStopsIndex",value:function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/bus_lk_app/data/stops.json",t.next=3,h.a.json("/bus_lk_app/data/stops.json");case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getClosestStops",value:function(){var n=Object(d.a)(u.a.mark((function n(e){var a,r,s,c,i,d;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=function(t){var n=Object(o.a)(t,2),e=n[0],a=n[1];return b.getDistance([r,s],[e,a])},a=Object(o.a)(e,2),r=a[0],s=a[1],n.next=4,t.getStopsIndex();case 4:return c=n.sent,d=Object.values(c).map((function(t){return t.distance=i(t.lat_lng),t})),n.abrupt("return",d.sort((function(t,n){return t.distance-n.distance})));case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}]),t}(),O=e(3);function x(t){var n=t.distanceKM;if(n<1){var e=1e3*n;return Object(O.jsxs)("span",{children:[e.toFixed(0),"m"]})}return n<10?Object(O.jsxs)("span",{children:[n.toFixed(1),"km"]}):Object(O.jsxs)("span",{children:[n.toFixed(0),"km"]})}function g(t){var n=t.closestStops;return Object(O.jsx)("ul",{children:n.slice(0,10).map((function(t,n){return Object(O.jsxs)("li",{children:[t.name," (",Object(O.jsx)(x,{distanceKM:t.distance}),")"]},"stop-".concat(n))}))})}var k=function(t){Object(j.a)(e,t);var n=Object(f.a)(e);function e(t){var a;return Object(p.a)(this,e),(a=n.call(this,t)).state={latLng:void 0,closestStops:void 0,isDataLoaded:!1},a}return Object(l.a)(e,[{key:"onGetCurrentPosition",value:function(){var t=Object(d.a)(u.a.mark((function t(n){var e,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[n.coords.latitude,n.coords.longitude],t.next=3,v.getClosestStops(e);case 3:a=t.sent,this.setState({latLng:e,closestStops:a,isDataLoaded:!0});case 5:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:navigator.geolocation.getCurrentPosition(this.onGetCurrentPosition.bind(this));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,n=t.latLng,e=t.closestStops;if(!t.isDataLoaded)return"Loading...";var a=Object(o.a)(n,2),r=[a[0],a[1]].map((function(t){return t.toFixed(6)})),s=Object(o.a)(r,2),c=s[0],i=s[1];return Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Bus App"}),Object(O.jsxs)("div",{children:["Location: (",c,"N, ",i,"E)"]}),Object(O.jsx)(g,{closestStops:e})]})}}]),e}(a.Component);var m=function(){return Object(O.jsx)(k,{})},M=function(t){t&&t instanceof Function&&e.e(3).then(e.bind(null,21)).then((function(n){var e=n.getCLS,a=n.getFID,r=n.getFCP,s=n.getLCP,c=n.getTTFB;e(t),a(t),r(t),s(t),c(t)}))};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(m,{})}),document.getElementById("root")),M()}},[[20,1,2]]]);
//# sourceMappingURL=main.c9f74b58.chunk.js.map